<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles de la Propiedad</title>
    <link rel="stylesheet" href="stylesprueba.css">
    <style>
        /* Default styles for mobile-first approach */
        @media screen and (max-width: 1919px) {
            .header-content {
                flex-direction: column;
                padding: 1rem;
            }
            
            .header-links {
                display: none !important;
                flex-direction: column;
                width: 100%;
                gap: 1rem !important;
                padding: 1rem 0 !important;
            }

            .header-links.active {
                display: flex !important;
            }

            .menu-toggle {
                display: block !important;
                position: absolute;
                left: 1rem;
                top: 1rem;
            }

            nav {
                margin-left: 0 !important;
                width: 100%;
            }

            .header-content img {
                margin: 1rem 0 !important;
            }

            /* Slider container responsive */
            .slider-container {
                width: 90%;
                margin: 0 auto;
                padding: 10px;
            }

            .slider-row {
                flex-direction: column;
                align-items: center;
                margin-bottom: 20px;
            }

            .slider-label {
                width: 100%;
                text-align: center;
                margin-bottom: 10px;
            }

            input[type="range"] {
                width: 100%;
            }

            .resultados {
                width: 90%;
                margin: 20px auto;
            }

            h2 {
                text-align: center;
                font-size: 1.5em;
                margin: 20px 0;
            }
        }

        /* Hide menu toggle on full desktop and Nest Hub Max */
        @media screen and (min-width: 1920px) {
            .menu-toggle {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content" style="display: flex; justify-content: center; align-items: center; width: 100%; padding: 1% 2%;">
            <button class="menu-toggle">☰</button>
            <div style="text-align: center;">
                <img src="media/Logo.png" alt="Logo" style="margin: 0 5%;">
                <p style="font-size: 0.8em; color: #666; margin-top: 5px;">Empresa gestora con número de acreditación: CVEE00422CS</p>
            </div>
            <nav style="flex-grow: 1; text-align: center; margin-left: -25%; display: flex; align-items: center;">
                <ul class="header-links" style="display: flex; justify-content: center; align-items: center; gap: 2%; margin: 0; padding: 0; width: 100%;">
                    <li><a href="paginaprueba.html" class="enlace">Inicio</a></li>
                    <li><a href="productos.html" class="enlace">Productos</a></li>
                    <li><a href="informacion.html" class="enlace">Conócenos</a></li>
                    <li><a href="reservas.html" class="enlace">Reservas</a></li>
                    <li><img src="media/logo_turisme_cv_gva.png" alt="Turisme" style="margin: 0 15%; height: auto;"></li>
                </ul>
            </nav>
        </div>
    </header>

    <div style="margin-top: 100px;">
        <main>
            <h2>1. CALCULE SU PRESUPUESTO APROXIMADO</h2>
            
            <div class="slider-container">
                <div class="slider-row">
                    <span class="slider-label">Nº Huéspedes</span>
                    <input type="range" min="1" max="16" value="2" id="huespedes">
                    <div class="slider-value">2</div>
                </div>
        
                <div class="slider-row">
                    <span class="slider-label">M² Interiores</span>
                    <input type="range" min="20" max="500" value="30" id="m2Interiores">
                    <div class="slider-value">30</div>
                </div>
        
                <div class="slider-row">
                    <span class="slider-label">M² Terraza</span>
                    <input type="range" min="0" max="500" value="0" id="m2Terraza">
                    <div class="slider-value">0</div>
                </div>
        
                <div class="slider-row">
                    <span class="slider-label">Nº Baños</span>
                    <input type="range" min="1" max="10" value="1" id="banos">
                    <div class="slider-value">1</div>
                </div>
        
                <div class="slider-row">
                    <span class="slider-label">Número de Habitaciones</span>
                    <input type="range" min="1" max="10" value="1" id="habitaciones">
                    <div class="slider-value">1</div>
                </div>
        
                <div class="slider-row">
                    <span class="slider-label">Nº Camas Dobles</span>
                    <input type="range" min="0" max="5" value="1" id="camasDobles">
                    <div class="slider-value">1</div>
                </div>
        
                <div class="slider-row">
                    <span class="slider-label">Nº Camas Individuales</span>
                    <input type="range" min="0" max="5" value="1" id="camasIndividuales">
                    <div class="slider-value">1</div>
                </div>
        
                <div class="slider-row">
                    <span class="slider-label">Nº Sofas Cama</span>
                    <input type="range" min="0" max="5" value="1" id="sofasCama">
                    <div class="slider-value">1</div>
                </div>
            </div>
            
            <!-- Agregar sección de resultados -->
            <!-- Modify the time display in the results section -->
            <div class="resultados" style="margin-top: 20px; padding: 20px; background-color: #f5f5f5; border-radius: 5px;">
                <h3>Resultados del Cálculo</h3>
                <p>Coste Base: <span id="costeBase">0</span>€</p>
                <p>IVA (21%): <span id="iva">0</span>€</p>
                <p>Coste Total: <span id="costeTotal">0</span>€</p>
                <p>Tiempo Estimado: <span id="tiempoEstimado">0 horas 0 minutos</span></p>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <button onclick="calcularPresupuesto()" style="padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer;">
                        Calcular Presupuesto
                    </button>
                    <button id="checkinBtn" onclick="toggleCheckin()" style="padding: 10px 20px; background-color: #808080; color: white; border: none; border-radius: 5px; cursor: pointer;">
                        Check-in Presencial (+20€)
                    </button>
                    <button id="toallasBtn" onclick="toggleToallas()" style="padding: 10px 20px; background-color: #808080; color: white; border: none; border-radius: 5px; cursor: pointer;">
                        Toallas/Sábanas (+15€/huésped)
                    </button>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Update all sliders to show their values and make them editable
        document.querySelectorAll('input[type="range"]').forEach(slider => {
            const valueDisplay = slider.nextElementSibling;
            
            // Make value display editable
            valueDisplay.addEventListener('click', function() {
                this.contentEditable = true;
                this.classList.add('editing');
                this.focus();
            });

            // Handle input changes
            valueDisplay.addEventListener('blur', function() {
                this.contentEditable = false;
                this.classList.remove('editing');
                let value = parseInt(this.textContent);
                const min = parseInt(slider.min);
                const max = parseInt(slider.max);
                
                // Validate input
                if (isNaN(value)) value = slider.value;
                if (value < min) value = min;
                if (value > max) value = max;
                
                // Update slider and display
                slider.value = value;
                this.textContent = value;
                calcularPresupuesto();
            });

            valueDisplay.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    this.blur();
                }
            });

            // Update display when slider changes
            slider.addEventListener('input', () => {
                valueDisplay.textContent = slider.value;
                calcularPresupuesto();
            });
        });
    </script>
    <script>
        let checkinActivo = false;
        let toallasActivo = false;
        
        function toggleCheckin() {
            const btn = document.getElementById('checkinBtn');
            checkinActivo = !checkinActivo;
            btn.style.backgroundColor = checkinActivo ? '#4CAF50' : '#808080';
            calcularPresupuesto();
        }

        function toggleToallas() {
            const btn = document.getElementById('toallasBtn');
            toallasActivo = !toallasActivo;
            btn.style.backgroundColor = toallasActivo ? '#4CAF50' : '#808080';
            calcularPresupuesto();
        }

        function calcularPresupuesto() {
            // Get values from sliders
            const numHuespedes = parseInt(document.getElementById('huespedes').value);
            const m2Interiores = parseInt(document.getElementById('m2Interiores').value);
            const m2Terraza = parseInt(document.getElementById('m2Terraza').value);
            const numBanos = parseInt(document.getElementById('banos').value);
            const numHabitaciones = parseInt(document.getElementById('habitaciones').value);
            const numCamasDobles = parseInt(document.getElementById('camasDobles').value);
            const numCamasIndividuales = parseInt(document.getElementById('camasIndividuales').value);
            const numSofasCama = parseInt(document.getElementById('sofasCama').value);
            
            // Cálculo del coste base ajustado para 40€
            let costeBase = 13; // Precio base fijo
            costeBase += m2Interiores * 0.17;  
            costeBase += m2Terraza * 0.17;     
            costeBase += numBanos * 4.25;       
            costeBase += numHabitaciones * 3.4; 
            costeBase += (numCamasDobles + numCamasIndividuales + numSofasCama) * 0.15;
            costeBase += numHuespedes * 1.5;   
            
            // Añadir coste de check-in si está activo
            if (checkinActivo) {
                costeBase += 20;
            }

            // Añadir coste de toallas/sábanas si está activo
            if (toallasActivo) {
                costeBase += numHuespedes * 15;
            }

            // Cálculo del IVA y total
            const iva = costeBase * 0.21;
            const costeTotal = costeBase + iva;
            // Cálculo del tiempo estimado ajustado para 1.5 horas base
            const tiempoEstimado = Math.ceil(
                (m2Interiores * 0.004) +     // ~7 minutos por 30m2
                (m2Terraza * 0.003) +        // ~5 minutos por terraza
                (numBanos * 0.35) +          // 21 minutos por baño
                (numHabitaciones * 0.25) +    // 15 minutos por habitación
                (numCamasDobles * 0.15) +     // 9 minutos por cama doble
                (numCamasIndividuales * 0.1) + // 6 minutos por cama individual
                (numSofasCama * 0.12)         // 7 minutos por sofá cama
            );
            // Modify the time calculation display
            // Nuevo cálculo del tiempo con escala exponencial
            const tiempoTotalMinutos = Math.ceil(
                50 + // Base fija de 50 minutos
                (m2Interiores * 0.4) +
                (m2Terraza * 0.2) +
                (numBanos * 8) +
                (numHabitaciones * 3) +
                (numCamasDobles * 1.5) +
                (numCamasIndividuales * 1) +
                (numSofasCama * 1)+
                (numHuespedes * 4)
            );
            const horas = Math.floor(tiempoTotalMinutos / 60);
            const minutos = tiempoTotalMinutos % 60;

            // Mostrar resultados
            document.getElementById('costeBase').textContent = costeBase.toFixed(2);
            document.getElementById('iva').textContent = iva.toFixed(2);
            document.getElementById('costeTotal').textContent = costeTotal.toFixed(2);
            document.getElementById('tiempoEstimado').textContent = `${horas} horas ${minutos} minutos`;
        }
    </script>
    
    <!-- Add menu toggle script -->
    <script>
        document.querySelector('.menu-toggle').addEventListener('click', function() {
            document.querySelector('.header-links').classList.toggle('active');
        });
    </script>
</body>
 <!-- Botón de WhatsApp -->
 <a href="https://api.whatsapp.com/send?phone=34655833488&text=Hola!%20" 
 target="_blank" 
 class="whatsapp-button">
 <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" width="50" height="50">
 </a>
 
 <!-- Estilos CSS para el botón -->
 <style>
 .whatsapp-button {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 1000;
  background-color: #25D366; /* Color de WhatsApp */
  border-radius: 50%;
  padding: 10px;
  box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
  transition: background-color 0.3s ease;
 }
 
 .whatsapp-button:hover {
  background-color: #128C7E; /* Color de WhatsApp al pasar el mouse */
 }
 
 .whatsapp-button img {
  display: block;
 }
 </style>
 <script>
     document.addEventListener('DOMContentLoaded', function() {
         const menuToggle = document.createElement('button');
         menuToggle.innerHTML = '&#9776;';
         menuToggle.className = 'menu-toggle';
         document.querySelector('.header-content').appendChild(menuToggle);
 
         menuToggle.addEventListener('click', function() {
             const nav = document.querySelector('nav ul');
             nav.classList.toggle('active');
         });
     });
 </script>
</html>